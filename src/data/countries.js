/**
 * Countries Dataset â€” All 195 UN Member States
 * Format: [name, capital, latitude, longitude, continent, region]
 * Centroids represent approximate geographic centers
 */

const COUNTRIES_RAW = [
    ["Afghanistan", "Kabul", 33.93911, 67.709953, "Asia", "South Asia"],
    ["Albania", "Tirana", 41.153332, 20.168331, "Europe", "Southern Europe"],
    ["Algeria", "Algiers", 28.033886, 1.659626, "Africa", "North Africa"],
    ["Andorra", "Andorra la Vella", 42.506285, 1.521801, "Europe", "Southern Europe"],
    ["Angola", "Luanda", -11.202692, 17.873887, "Africa", "Central Africa"],
    ["Antigua and Barbuda", "Saint John's", 17.060816, -61.796428, "North America", "Caribbean"],
    ["Argentina", "Buenos Aires", -38.416097, -63.616672, "South America", "South America"],
    ["Armenia", "Yerevan", 40.069099, 45.038189, "Asia", "Western Asia"],
    ["Australia", "Canberra", -25.274398, 133.775136, "Oceania", "Australia and New Zealand"],
    ["Austria", "Vienna", 47.516231, 14.550072, "Europe", "Western Europe"],
    ["Azerbaijan", "Baku", 40.143105, 47.576927, "Asia", "Western Asia"],
    ["Bahamas", "Nassau", 25.03428, -77.39628, "North America", "Caribbean"],
    ["Bahrain", "Manama", 25.930414, 50.637772, "Asia", "Western Asia"],
    ["Bangladesh", "Dhaka", 23.684994, 90.356331, "Asia", "South Asia"],
    ["Barbados", "Bridgetown", 13.193887, -59.543198, "North America", "Caribbean"],
    ["Belarus", "Minsk", 53.709807, 27.953389, "Europe", "Eastern Europe"],
    ["Belgium", "Brussels", 50.503887, 4.469936, "Europe", "Western Europe"],
    ["Belize", "Belmopan", 17.189877, -88.49765, "North America", "Central America"],
    ["Benin", "Porto Novo", 9.30769, 2.315834, "Africa", "West Africa"],
    ["Bhutan", "Thimphu", 27.514162, 90.433601, "Asia", "South Asia"],
    ["Bolivia", "Sucre", -16.290154, -63.588653, "South America", "South America"],
    ["Bosnia and Herzegovina", "Sarajevo", 43.915886, 17.679076, "Europe", "Southern Europe"],
    ["Botswana", "Gaborone", -22.328474, 24.684866, "Africa", "Southern Africa"],
    ["Brazil", "Brasilia", -14.235004, -51.92528, "South America", "South America"],
    ["Brunei", "Bandar Seri Begawan", 4.535277, 114.727669, "Asia", "South-East Asia"],
    ["Bulgaria", "Sofia", 42.733883, 25.48583, "Europe", "Eastern Europe"],
    ["Burkina Faso", "Ouagadougou", 12.238333, -1.561593, "Africa", "West Africa"],
    ["Burundi", "Gitega", -3.373056, 29.918886, "Africa", "East Africa"],
    ["Cambodia", "Phnom Penh", 12.565679, 104.990963, "Asia", "South-East Asia"],
    ["Cameroon", "Yaounde", 7.369722, 12.354722, "Africa", "Central Africa"],
    ["Canada", "Ottawa", 56.130366, -106.346771, "North America", "North America"],
    ["Cape Verde", "Praia", 16.002082, -24.013197, "Africa", "West Africa"],
    ["Central African Republic", "Bangui", 6.611111, 20.939444, "Africa", "Central Africa"],
    ["Chad", "N'Djamena", 15.454166, 18.732207, "Africa", "Central Africa"],
    ["Chile", "Santiago", -35.675147, -71.542969, "South America", "South America"],
    ["China", "Beijing", 35.86166, 104.195397, "Asia", "East Asia"],
    ["Colombia", "Bogota", 4.570868, -74.297333, "South America", "South America"],
    ["Comoros", "Moroni", -11.875001, 43.872219, "Africa", "East Africa"],
    ["Congo", "Brazzaville", -0.228021, 15.827659, "Africa", "Central Africa"],
    ["Costa Rica", "San Jose", 9.748917, -83.753428, "North America", "Central America"],
    ["Croatia", "Zagreb", 45.1, 15.2, "Europe", "Southern Europe"],
    ["Cuba", "Havana", 21.521757, -77.781167, "North America", "Caribbean"],
    ["Cyprus", "Nicosia", 35.126413, 33.429859, "Asia", "Western Asia"],
    ["Czech Republic", "Prague", 49.817492, 15.472962, "Europe", "Eastern Europe"],
    ["Denmark", "Copenhagen", 56.26392, 9.501785, "Europe", "Northern Europe"],
    ["Djibouti", "Djibouti", 11.825138, 42.590275, "Africa", "East Africa"],
    ["Dominica", "Roseau", 15.414999, -61.370976, "North America", "Caribbean"],
    ["Dominican Republic", "Santo Domingo", 18.735693, -70.162651, "North America", "Caribbean"],
    ["Ecuador", "Quito", -1.831239, -78.183406, "South America", "South America"],
    ["Egypt", "Cairo", 26.820553, 30.802498, "Africa", "North Africa"],
    ["El Salvador", "San Salvador", 13.794185, -88.89653, "North America", "Central America"],
    ["Equatorial Guinea", "Malabo", 1.650801, 10.267895, "Africa", "Central Africa"],
    ["Eritrea", "Asmara", 15.179384, 39.782334, "Africa", "East Africa"],
    ["Estonia", "Tallinn", 58.595272, 25.013607, "Europe", "Northern Europe"],
    ["Eswatini", "Mbabane", -26.522503, 31.465866, "Africa", "Southern Africa"],
    ["Ethiopia", "Addis Ababa", 9.145, 40.489673, "Africa", "East Africa"],
    ["Fiji", "Suva", -16.578193, 179.414413, "Oceania", "Melanesia"],
    ["Finland", "Helsinki", 61.92411, 25.748151, "Europe", "Northern Europe"],
    ["France", "Paris", 46.227638, 2.213749, "Europe", "Western Europe"],
    ["Gabon", "Libreville", -0.803689, 11.609444, "Africa", "Central Africa"],
    ["Gambia", "Banjul", 13.443182, -15.310139, "Africa", "West Africa"],
    ["Georgia", "Tbilisi", 42.315407, 43.356892, "Asia", "Western Asia"],
    ["Germany", "Berlin", 51.165691, 10.451526, "Europe", "Western Europe"],
    ["Ghana", "Accra", 7.946527, -1.023194, "Africa", "West Africa"],
    ["Greece", "Athens", 39.074208, 21.824312, "Europe", "Southern Europe"],
    ["Grenada", "Saint George's", 12.262776, -61.604171, "North America", "Caribbean"],
    ["Guatemala", "Guatemala City", 15.783471, -90.230759, "North America", "Central America"],
    ["Guinea", "Conakry", 9.945587, -9.696645, "Africa", "West Africa"],
    ["Guinea-Bissau", "Bissau", 11.803749, -15.180413, "Africa", "West Africa"],
    ["Guyana", "Georgetown", 4.860416, -58.93018, "South America", "South America"],
    ["Haiti", "Port-au-Prince", 18.971187, -72.285215, "North America", "Caribbean"],
    ["Honduras", "Tegucigalpa", 15.199999, -86.241905, "North America", "Central America"],
    ["Hungary", "Budapest", 47.162494, 19.503304, "Europe", "Eastern Europe"],
    ["Iceland", "Reykjavik", 64.963051, -19.020835, "Europe", "Northern Europe"],
    ["India", "New Delhi", 20.593684, 78.96288, "Asia", "South Asia"],
    ["Indonesia", "Jakarta", -0.789275, 113.921327, "Asia", "South-East Asia"],
    ["Iran", "Tehran", 32.427908, 53.688046, "Asia", "South Asia"],
    ["Iraq", "Baghdad", 33.223191, 43.679291, "Asia", "Western Asia"],
    ["Ireland", "Dublin", 53.41291, -8.24389, "Europe", "Northern Europe"],
    ["Israel", "Jerusalem", 31.046051, 34.851612, "Asia", "Western Asia"],
    ["Italy", "Rome", 41.87194, 12.56738, "Europe", "Southern Europe"],
    ["Jamaica", "Kingston", 18.109581, -77.297508, "North America", "Caribbean"],
    ["Japan", "Tokyo", 36.204824, 138.252924, "Asia", "East Asia"],
    ["Jordan", "Amman", 30.585164, 36.238414, "Asia", "Western Asia"],
    ["Kazakhstan", "Nur-Sultan", 48.019573, 66.923684, "Asia", "Central Asia"],
    ["Kenya", "Nairobi", -0.023559, 37.906193, "Africa", "East Africa"],
    ["Kiribati", "South Tarawa", -3.370417, -168.734039, "Oceania", "Micronesia"],
    ["Kuwait", "Kuwait City", 29.31166, 47.481766, "Asia", "Western Asia"],
    ["Kyrgyzstan", "Bishkek", 41.20438, 74.766098, "Asia", "Central Asia"],
    ["Laos", "Vientiane", 19.85627, 102.495496, "Asia", "South-East Asia"],
    ["Latvia", "Riga", 56.879635, 24.603189, "Europe", "Northern Europe"],
    ["Lebanon", "Beirut", 33.854721, 35.862285, "Asia", "Western Asia"],
    ["Lesotho", "Maseru", -29.609988, 28.233608, "Africa", "Southern Africa"],
    ["Liberia", "Monrovia", 6.428055, -9.429499, "Africa", "West Africa"],
    ["Libya", "Tripoli", 26.3351, 17.228331, "Africa", "North Africa"],
    ["Liechtenstein", "Vaduz", 47.166, 9.555373, "Europe", "Western Europe"],
    ["Lithuania", "Vilnius", 55.169438, 23.881275, "Europe", "Northern Europe"],
    ["Luxembourg", "Luxembourg", 49.815273, 6.129583, "Europe", "Western Europe"],
    ["Madagascar", "Antananarivo", -18.766947, 46.869107, "Africa", "East Africa"],
    ["Malawi", "Lilongwe", -13.254308, 34.301525, "Africa", "East Africa"],
    ["Malaysia", "Kuala Lumpur", 4.210484, 101.975766, "Asia", "South-East Asia"],
    ["Maldives", "Male", 3.202778, 73.22068, "Asia", "South Asia"],
    ["Mali", "Bamako", 17.570692, -3.996166, "Africa", "West Africa"],
    ["Malta", "Valletta", 35.937496, 14.375416, "Europe", "Southern Europe"],
    ["Marshall Islands", "Majuro", 7.131474, 171.184478, "Oceania", "Micronesia"],
    ["Mauritania", "Nouakchott", 21.00789, -10.940835, "Africa", "West Africa"],
    ["Mauritius", "Port Louis", -20.348404, 57.552152, "Africa", "East Africa"],
    ["Mexico", "Mexico City", 23.634501, -102.552784, "North America", "North America"],
    ["Micronesia", "Palikir", 7.425554, 150.550812, "Oceania", "Micronesia"],
    ["Moldova", "Chisinau", 47.411631, 28.369885, "Europe", "Eastern Europe"],
    ["Monaco", "Monaco", 43.750298, 7.412841, "Europe", "Western Europe"],
    ["Mongolia", "Ulaanbaatar", 46.862496, 103.846656, "Asia", "East Asia"],
    ["Montenegro", "Podgorica", 42.708678, 19.37439, "Europe", "Southern Europe"],
    ["Morocco", "Rabat", 31.791702, -7.09262, "Africa", "North Africa"],
    ["Mozambique", "Maputo", -18.665695, 35.529562, "Africa", "East Africa"],
    ["Myanmar", "Naypyidaw", 21.913965, 95.956223, "Asia", "South-East Asia"],
    ["Namibia", "Windhoek", -22.95764, 18.49041, "Africa", "Southern Africa"],
    ["Nauru", "Yaren", -0.522778, 166.931503, "Oceania", "Micronesia"],
    ["Nepal", "Kathmandu", 28.394857, 84.124008, "Asia", "South Asia"],
    ["Netherlands", "Amsterdam", 52.132633, 5.291266, "Europe", "Western Europe"],
    ["New Zealand", "Wellington", -40.900557, 174.885971, "Oceania", "Australia and New Zealand"],
    ["Nicaragua", "Managua", 12.865416, -85.207229, "North America", "Central America"],
    ["Niger", "Niamey", 17.607789, 8.081666, "Africa", "West Africa"],
    ["Nigeria", "Abuja", 9.081999, 8.675277, "Africa", "West Africa"],
    ["North Korea", "Pyongyang", 40.339852, 127.510093, "Asia", "East Asia"],
    ["North Macedonia", "Skopje", 41.608635, 21.745275, "Europe", "Southern Europe"],
    ["Norway", "Oslo", 60.472024, 8.468946, "Europe", "Northern Europe"],
    ["Oman", "Muscat", 21.512583, 55.923255, "Asia", "Western Asia"],
    ["Pakistan", "Islamabad", 30.375321, 69.345116, "Asia", "South Asia"],
    ["Palau", "Ngerulmud", 7.51498, 134.58252, "Oceania", "Micronesia"],
    ["Panama", "Panama City", 8.537981, -80.782127, "North America", "Central America"],
    ["Papua New Guinea", "Port Moresby", -6.314993, 143.95555, "Oceania", "Melanesia"],
    ["Paraguay", "Asuncion", -23.442503, -58.443832, "South America", "South America"],
    ["Peru", "Lima", -9.189967, -75.015152, "South America", "South America"],
    ["Philippines", "Manila", 12.879721, 121.774017, "Asia", "South-East Asia"],
    ["Poland", "Warsaw", 51.919438, 19.145136, "Europe", "Eastern Europe"],
    ["Portugal", "Lisbon", 39.399872, -8.224454, "Europe", "Southern Europe"],
    ["Qatar", "Doha", 25.354826, 51.183884, "Asia", "Western Asia"],
    ["Romania", "Bucharest", 45.943161, 24.96676, "Europe", "Eastern Europe"],
    ["Russia", "Moscow", 61.52401, 105.318756, "Europe/Asia", "Eastern Europe"],
    ["Rwanda", "Kigali", -1.940278, 29.873888, "Africa", "East Africa"],
    ["Saint Kitts and Nevis", "Basseterre", 17.357822, -62.782998, "North America", "Caribbean"],
    ["Saint Lucia", "Castries", 13.909444, -60.978893, "North America", "Caribbean"],
    ["Saint Vincent and the Grenadines", "Kingstown", 12.984305, -61.287228, "North America", "Caribbean"],
    ["Samoa", "Apia", -13.759029, -172.104629, "Oceania", "Polynesia"],
    ["San Marino", "San Marino", 43.94236, 12.457777, "Europe", "Southern Europe"],
    ["Sao Tome and Principe", "Sao Tome", 0.18636, 6.613081, "Africa", "Central Africa"],
    ["Saudi Arabia", "Riyadh", 23.885942, 45.079162, "Asia", "Western Asia"],
    ["Senegal", "Dakar", 14.497401, -14.452362, "Africa", "West Africa"],
    ["Serbia", "Belgrade", 44.016521, 21.005859, "Europe", "Southern Europe"],
    ["Seychelles", "Victoria", -4.679574, 55.491977, "Africa", "East Africa"],
    ["Sierra Leone", "Freetown", 8.460555, -11.779889, "Africa", "West Africa"],
    ["Singapore", "Singapore", 1.352083, 103.819836, "Asia", "South-East Asia"],
    ["Slovakia", "Bratislava", 48.669026, 19.699024, "Europe", "Eastern Europe"],
    ["Slovenia", "Ljubljana", 46.151241, 14.995463, "Europe", "Southern Europe"],
    ["Solomon Islands", "Honiara", -9.64571, 160.156194, "Oceania", "Melanesia"],
    ["Somalia", "Mogadishu", 5.152149, 46.199616, "Africa", "East Africa"],
    ["South Africa", "Pretoria", -30.559482, 22.937506, "Africa", "Southern Africa"],
    ["South Korea", "Seoul", 35.907757, 127.766922, "Asia", "East Asia"],
    ["South Sudan", "Juba", 6.877039, 31.306978, "Africa", "East Africa"],
    ["Spain", "Madrid", 40.463667, -3.74922, "Europe", "Southern Europe"],
    ["Sri Lanka", "Colombo", 7.873054, 80.771797, "Asia", "South Asia"],
    ["Sudan", "Khartoum", 12.862807, 30.217636, "Africa", "North Africa"],
    ["Suriname", "Paramaribo", 3.919305, -56.027783, "South America", "South America"],
    ["Sweden", "Stockholm", 60.128161, 18.643501, "Europe", "Northern Europe"],
    ["Switzerland", "Bern", 46.818188, 8.227512, "Europe", "Western Europe"],
    ["Syria", "Damascus", 34.802075, 38.996815, "Asia", "Western Asia"],
    ["Tajikistan", "Dushanbe", 38.861034, 71.276093, "Asia", "Central Asia"],
    ["Tanzania", "Dodoma", -6.369028, 34.888822, "Africa", "East Africa"],
    ["Thailand", "Bangkok", 15.870032, 100.992541, "Asia", "South-East Asia"],
    ["Timor-Leste", "Dili", -8.874217, 125.727539, "Asia", "South-East Asia"],
    ["Togo", "Lome", 8.619543, 0.824782, "Africa", "West Africa"],
    ["Tonga", "Nuku'alofa", -21.178986, -175.198242, "Oceania", "Polynesia"],
    ["Trinidad and Tobago", "Port of Spain", 10.691803, -61.222503, "North America", "Caribbean"],
    ["Tunisia", "Tunis", 33.886917, 9.537499, "Africa", "North Africa"],
    ["Turkey", "Ankara", 38.963745, 35.243322, "Asia", "Western Asia"],
    ["Turkmenistan", "Ashgabat", 38.969719, 59.556278, "Asia", "Central Asia"],
    ["Tuvalu", "Funafuti", -7.109535, 177.64933, "Oceania", "Polynesia"],
    ["Uganda", "Kampala", 1.373333, 32.290275, "Africa", "East Africa"],
    ["Ukraine", "Kyiv", 48.379433, 31.16558, "Europe", "Eastern Europe"],
    ["United Arab Emirates", "Abu Dhabi", 23.424076, 53.847818, "Asia", "Western Asia"],
    ["United Kingdom", "London", 55.378051, -3.435973, "Europe", "Northern Europe"],
    ["United States", "Washington", 37.09024, -95.712891, "North America", "North America"],
    ["Uruguay", "Montevideo", -32.522779, -55.765835, "South America", "South America"],
    ["Uzbekistan", "Tashkent", 41.377491, 64.585262, "Asia", "Central Asia"],
    ["Vanuatu", "Port Vila", -15.376706, 166.959158, "Oceania", "Melanesia"],
    ["Venezuela", "Caracas", 6.42375, -66.58973, "South America", "South America"],
    ["Vietnam", "Hanoi", 14.058324, 108.277199, "Asia", "South-East Asia"],
    ["Yemen", "Sana'a", 15.552727, 48.516388, "Asia", "Western Asia"],
    ["Zambia", "Lusaka", -13.133897, 27.849332, "Africa", "Southern Africa"],
    ["Zimbabwe", "Harare", -19.015438, 29.154857, "Africa", "Southern Africa"]
];

/** Build a Map for O(1) lookups */
const COUNTRIES_MAP = new Map();
for (const row of COUNTRIES_RAW) {
    const key = row[0].toLowerCase();
    if (!COUNTRIES_MAP.has(key)) {
        COUNTRIES_MAP.set(key, {
            name: row[0],
            capital: row[1],
            lat: row[2],
            lng: row[3],
            continent: row[4],
            region: row[5]
        });
    }
}

/**
 * Search countries by prefix
 * @param {string} prefix
 * @param {number} limit
 * @returns {object[]}
 */
function searchCountries(prefix, limit = 10) {
    if (!prefix || prefix.length < 1) return [];
    const p = prefix.toLowerCase();
    const results = [];
    for (const [key, country] of COUNTRIES_MAP) {
        if (key.startsWith(p)) {
            results.push(country);
            if (results.length >= limit) break;
        }
    }
    return results;
}

console.log(`[Countries] Loaded ${COUNTRIES_MAP.size} countries`);

module.exports = { COUNTRIES_MAP, COUNTRIES_RAW, searchCountries };
