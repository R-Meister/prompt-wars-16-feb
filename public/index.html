<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Atlas: Echoes of Earth ‚Äî Experience cities through human moments. An AI-driven geography game that builds a living emotional world map.">
  <meta name="theme-color" content="#0a0e1a">
  <title>Atlas: Echoes of Earth</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen" role="status" aria-label="Loading application">
    <div class="loading-content">
      <div class="loading-globe">üåç</div>
      <h1 class="loading-title">Atlas</h1>
      <p class="loading-subtitle">Echoes of Earth</p>
      <div class="loading-bar"><div class="loading-fill"></div></div>
    </div>
  </div>

  <!-- Main Application -->
  <main id="app" class="app hidden" role="main">
    <!-- Top Bar -->
    <header class="top-bar" role="banner">
      <div class="logo">
        <span class="logo-icon" aria-hidden="true">üåç</span>
        <h1 class="logo-text">Atlas</h1>
      </div>
      <nav class="top-actions" aria-label="Game controls">
        <button id="btn-world-map" class="btn-icon" title="View World Map" aria-label="View emotional world map">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        </button>
        <button id="btn-new-game" class="btn-icon" title="New Session" aria-label="Start new game session">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
        </button>
        <div id="session-counter" class="session-counter" aria-live="polite">
          <span id="city-count">0</span> cities
        </div>
      </nav>
    </header>

    <!-- Map Container -->
    <div id="map-container" class="map-container" role="img" aria-label="Emotional world map">
      <div id="google-map" class="google-map"></div>
      <div id="map-overlay" class="map-overlay"></div>
    </div>

    <!-- Game Panel -->
    <section id="game-panel" class="game-panel" role="region" aria-label="Game interaction panel">
      <!-- City Chain -->
      <div id="city-chain" class="city-chain" role="list" aria-label="Cities visited this session">
        <div class="chain-placeholder">Enter your first city to begin...</div>
      </div>

      <!-- Input Area -->
      <div class="input-area" id="input-area">
        <div class="input-wrapper">
          <label for="city-input" class="sr-only">Enter a city name</label>
          <input
            type="text"
            id="city-input"
            class="city-input"
            placeholder="Enter a city name..."
            autocomplete="off"
            spellcheck="false"
            aria-describedby="input-hint"
          >
          <button id="btn-submit" class="btn-submit" aria-label="Submit city">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4z"/></svg>
          </button>
        </div>
        <div id="input-hint" class="input-hint" aria-live="polite"></div>
        <!-- Autocomplete dropdown -->
        <ul id="autocomplete-list" class="autocomplete-list" role="listbox" aria-label="City suggestions"></ul>
      </div>

      <!-- Scenario Display -->
      <div id="scenario-area" class="scenario-area hidden" role="region" aria-label="City scenario" aria-live="polite">
        <div class="scenario-header">
          <h2 id="scenario-city-name" class="scenario-city-name"></h2>
          <span id="scenario-country" class="scenario-country"></span>
        </div>
        <p id="scenario-text" class="scenario-text"></p>
        <div id="choice-buttons" class="choice-buttons" role="group" aria-label="Make your choice">
          <button id="choice-a" class="choice-btn choice-a" data-choice="A">
            <span class="choice-label">A</span>
            <span id="choice-a-text" class="choice-text"></span>
          </button>
          <button id="choice-b" class="choice-btn choice-b" data-choice="B">
            <span class="choice-label">B</span>
            <span id="choice-b-text" class="choice-text"></span>
          </button>
        </div>
      </div>

      <!-- Echo Result -->
      <div id="echo-result" class="echo-result hidden" role="status" aria-live="polite">
        <div class="echo-header">
          <span class="echo-icon" aria-hidden="true">‚ú®</span>
          <span class="echo-title">Echo Left</span>
        </div>
        <div id="emotion-bars" class="emotion-bars"></div>
        <p id="echo-message" class="echo-message"></p>
        <button id="btn-continue" class="btn-continue">Continue Journey</button>
      </div>
    </section>

    <!-- World Map Modal -->
    <div id="world-map-modal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Emotional World Map">
      <div class="modal-content">
        <div class="modal-header">
          <h2>üåç Emotional World Map</h2>
          <button id="btn-close-modal" class="btn-close" aria-label="Close map">&times;</button>
        </div>
        <div id="world-map-view" class="world-map-view"></div>
        <div class="modal-legend">
          <span class="legend-item"><span class="legend-dot" style="background:hsl(35,90%,55%)"></span>Warmth</span>
          <span class="legend-item"><span class="legend-dot" style="background:hsl(220,70%,55%)"></span>Loneliness</span>
          <span class="legend-item"><span class="legend-dot" style="background:hsl(0,75%,55%)"></span>Tension</span>
          <span class="legend-item"><span class="legend-dot" style="background:hsl(280,60%,55%)"></span>Nostalgia</span>
          <span class="legend-item"><span class="legend-dot" style="background:hsl(145,65%,45%)"></span>Belonging</span>
        </div>
      </div>
    </div>
  </main>

  <!-- Toast Notifications -->
  <div id="toast-container" class="toast-container" role="status" aria-live="polite"></div>

  <script src="/config.js"></script>
  <script src="/js/map.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
